meta:
  platform: jira
  document_type: component
  version: 1.0.0
  last_updated: 2025-10-30
  status: stable
  inherits_from: base.yml

# Template with base variables merged automatically by the engine
template:
  
  # Jira-specific overrides
  title: "[{{ context.project.component_prefix | default(project.component_prefix) | default('UI') }}] {{ context.componentName | default(figma.component_name) | default('Component') }}"
  issue_type: Task
  priority: "{{ context.priority | default(calculated.priority) | default('Medium') }}"
  labels: ["component", "ui", "{{ context.project.tech_stack.0 | default(project.tech_stack.0) | lowercase }}"]
  
  # Content template for Jira tickets
  content: |
    h2. ğŸ¯ Component Overview
    
    Implement the *{{ context.componentName | default(figma.component_name) | default('Component') }}* component from the design specifications.
    
    *ğŸ“‹ Quick Details:*
    * *Project*: {{ context.projectName | default(project.name) | default('Project') }}
    * *Component*: {{ context.componentName | default(figma.component_name) | default('Component') }}
    * *Issue Type*: {{ context.issueType | default('Component Implementation') }}
    * *Priority*: {{ context.priority | default(calculated.priority) | default('Medium') }}
    * *Story Points*: {{ context.storyPoints | default(calculated.story_points) | default('5') }}
    
    h2. ğŸ¨ Design References
    
    **ğŸ”— Figma Design**: [View Component]({{ context.figma.live_link | default(figma.live_link) }})
    **ğŸ“¸ Screenshot**: {{ context.figma.screenshot_markdown.jira | default(figma.screenshot_markdown.jira) | default('!screenshot.png|thumbnail!') }}
    
    **ğŸ¨ Design Tokens**:
    {% if figma.extracted_colors %}
    * *Colors*: {{ figma.extracted_colors }}
    {% else %}
    * *Colors*: ğŸ”§ *Enhancement Needed: Run enhanced context extraction for color tokens*
    {% endif %}
    {% if figma.extracted_typography %}
    * *Typography*: {{ figma.extracted_typography }}
    {% else %}
    * *Typography*: ğŸ”§ *Enhancement Needed: Run enhanced context extraction for typography*
    {% endif %}
    {% if calculated.design_analysis %}
    
    **ğŸ¯ Design Analysis**: {{ calculated.design_analysis }}
    {% else %}
    
    **ğŸ¯ Design Analysis**: ğŸ”§ *Enhancement Needed: Use AI-powered analysis or enhanced context extraction for detailed design insights*
    {% endif %}
    
    h2. âœ… Acceptance Criteria
    
    * *Visual Accuracy*: Component matches design specifications exactly
    * *Responsive Design*: Works across all supported breakpoints (mobile, tablet, desktop)
    * *Accessibility*: Meets WCAG 2.1 AA standards with proper ARIA labels
    * *Design System Compliance*: Uses approved design tokens and follows naming conventions
    * *Testing*: Unit tests with {{ context.project.testing_framework | default(project.testing_framework) | default('Jest + RTL') }}
    * *Performance*: Component renders efficiently with no unnecessary re-renders
    * *Documentation*: Component documented in Storybook with all variants
    
    h2. ğŸ”§ Technical Requirements
    
    **Implementation Stack:**
    {% if project.tech_stack %}
    {% for tech in project.tech_stack %}
    * {{ tech }}
    {% endfor %}
    {% else %}
    * ğŸ”§ *Enhancement Needed: Specify tech stack in request*
    * React (assumed)
    * TypeScript (recommended)
    {% endif %}
    
    **Code Formatting Note**: Use {code:techstack}code here{code} format for code blocks (e.g., {code:typescript}, {code:css}, {code:html})
    
    **Component Structure:**
    {code:bash}
    {{ context.componentName | default(figma.component_name) | default('Component') }}/
    â”œâ”€â”€ {{ context.componentName | default(figma.component_name) | default('Component') }}.tsx          # Main component
    â”œâ”€â”€ {{ context.componentName | default(figma.component_name) | default('Component') }}.module.css   # Component styles
    â”œâ”€â”€ {{ context.componentName | default(figma.component_name) | default('Component') }}.test.tsx     # Unit tests
    â”œâ”€â”€ {{ figma.component_name }}.stories.tsx  # Storybook stories
    â”œâ”€â”€ types.ts                                # TypeScript interfaces
    â””â”€â”€ index.ts                                # Export file
    {code}
    
    {% if calculated.complexity == 'complex' %}
    h2. âš ï¸  Complexity Analysis
    
    *High Complexity Component* ({{ calculated.hours }} hours estimated)
    * *Confidence Level*: {{ calculated.confidence * 100 }}%
    {% if calculated.risk_factors %}
    * *Risk Factors*: {{ calculated.risk_factors | join(', ') }}
    {% else %}
    * *Risk Factors*: ğŸ”§ *Enhancement Needed: Use AI analysis for risk assessment*
    {% endif %}
    {% if calculated.similar_components %}
    * *Similar Components*: {{ calculated.similar_components | join(', ') }}
    {% else %}
    * *Similar Components*: ğŸ”§ *Enhancement Needed: Component similarity analysis not available*
    {% endif %}
    {% else %}
    h2. ğŸ“Š Complexity Analysis
    
    *{{ calculated.complexity | capitalize | default('Medium') }} Complexity Component* ({{ calculated.hours | default('4-6') }} hours estimated)
    * *Confidence Level*: {{ calculated.confidence * 100 | default('75') }}%
    * *Analysis*: ğŸ”§ *Enhancement Available: Use AI-powered analysis for detailed complexity assessment*
    {% endif %}
    
    h2. ğŸ“‹ Implementation Tasks
    
    * *Setup*: Create component file structure
    * *Types*: Define TypeScript interfaces and prop types
    * *Styling*: Implement CSS with design tokens
    * *Logic*: Add component behavior and state management
    * *Testing*: Write comprehensive unit tests
    * *Stories*: Create Storybook documentation
    * *Review*: Code review and accessibility audit
    
    {% if authoring.notes != 'Authoring Notes Not Found' %}
    h2. ğŸ“ AEM Authoring Notes
    
    {{ authoring.notes }}
    
    *Technical Details:*
    * *Component Path*: {{ authoring.component_path }}
    * *CQ Template*: {{ authoring.cq_template }}
    * *Touch UI Required*: {{ authoring.touch_ui_required }}
    {% endif %}
    
    h2. ğŸ”— Resources
    
    * *Design System*: [Component Library|{{ context.project.component_library_url | default(project.component_library_url) | default('https://storybook.company.com') }}]
    * *Accessibility*: [WCAG Guidelines|{{ context.project.accessibility_url | default(project.accessibility_url) | default('https://accessibility.company.com') }}]
    * *Testing*: [Testing Standards|{{ context.project.testing_standards_url | default(project.testing_standards_url) | default('https://testing.company.com') }}]
    * *Figma*: [Design Specs|{{ context.figma.live_link | default(figma.live_link) }}]
    
    ---
    
    **Generated**: {{ 'now' | date('%Y-%m-%d %H:%M') }} via Universal Template System  
    **Template**: jira/component.yml â†’ base.yml  
        **Confidence**: {{ context.calculated.confidence | default(calculated.confidence) | default(0.8) * 100 }}% | **Estimated Hours**: {{ context.calculated.hours | default(calculated.hours) | default(8) }}
